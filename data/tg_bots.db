-- Users table (for password/auth)
CREATE TABLE IF NOT EXISTS users(
    user_id INTEGER PRIMARY KEY,
    last_auth INTEGER
);

-- Content table (all uploaded content: thumbnail, description, URL)
CREATE TABLE IF NOT EXISTS content(
    content_id INTEGER PRIMARY KEY AUTOINCREMENT,
    uploader_id INTEGER,
    thumb_file_id TEXT,
    description TEXT,
    url TEXT,
    requires_token INTEGER DEFAULT 0,  -- 0 = no token, 1 = requires token
    created_at INTEGER
);

-- Media table (photos/videos linked to content)
CREATE TABLE IF NOT EXISTS content_media(
    media_id INTEGER PRIMARY KEY AUTOINCREMENT,
    content_id INTEGER,
    file_id TEXT,
    type TEXT  -- 'photo' or 'video'
);

-- Tokens table (for video viewing)
CREATE TABLE IF NOT EXISTS tokens(
    token_id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER,
    content_id INTEGER,
    created_at INTEGER
);

-- VIP users (can watch without tokens)
CREATE TABLE IF NOT EXISTS vip_users(
    user_id INTEGER PRIMARY KEY
);
